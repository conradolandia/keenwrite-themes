% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%
% Configure table of contents.
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

% Set up Roman numerals for the TOC.
\definestructureconversionset[frontpart:pagenumber][][romannumerals]
\definestructureconversionset[bodypart:pagenumber][][numbers]

\setuplist[chapter][pageconversionset=pagenumber]

% Set up the ToC so that the page numbers are the internal link colour.
\setuplist[chapter, section, subsection][
  color=TextColourTertiaryDk,
  pagecolor=TextColourHyperlink,
  before={\setupheader[state=stop]},
]

% Clickable table of contents and leader dots.
\setupcombinedlist[content][
  alternative=c,
  interaction=all,
  list={chapter},
]

\startsectionblockenvironment[frontpart]
  % Ensure the ToC starts at iii to match PDF page number.
  \setupuserpagenumber[numberconversion=romannumerals]
  \setuppagenumber[number=3]
\stopsectionblockenvironment

\startsectionblockenvironment [bodypart]
  % Ensure the first chapter starts at 1 to match PDF page number.
  \setuppagenumber[number=1]

  % After the TOC, put chapter titles on separate pages.
  \setuphead[chapter][
    after={\pagebreak\placeinitial},
    footer=empty,
  ]
\stopsectionblockenvironment

